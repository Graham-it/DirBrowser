Dir Browser
===========

...a lightweight and versatile program launcher for Commodore 8-bit machines!

Version 1.08 (minor revision)
Released on August 23, 2025

Version 1.07 (first release)
Released on August 14, 2025

Copyright (c) 2025 Francesco Gramignani "Graham"

https://graham-it.itch.io/dirbrowser
https://github.com/graham-it/DirBrowser


Descrizione
===========

Dir Browser è un programma per macchine Commodore che permette di esplorare il
contenuto di uno o più disk drive collegati.
Inoltre è possibile cambiare la directory corrente, montare le immagini disco
(o nastro) e lanciare i programmi in modo semplice e intuitivo.
Concepito per l'utilizzo con i dispositivi SD2IEC, può essere usato anche con
i disk drive Commodore (o compatibili).


Compatibilità
=============

Dir Browser è disponibile per le seguenti macchine Commodore:
- C64		con "Turbo" opzionale
- VIC-20	con o senza espansione di memoria
- C128		in modalità 40 e 80 colonne
- 264 Series	(C16, Plus/4 e le altre macchine TED)

Disk drive testati:
- SD2IEC
- 1541
- 1541-II
- 1571
- 1581		(in emulazione su VICE)

File immagine supportati:
- .d64		1540, 1541, 1541-II, 1551 (floppy da 5,25")
- .d71		1571 (doppia faccia)
- .d81		1581 (floppy da 3,5")
- .d41		(come .d64)
- .m2i		un container compatibile con la precedente interfaccia MMC2IEC
- .dnp		partizione nativa per gli hard disk della CMD
- .tap		tramite modulo opzionale ITS (non testato)


Caratteristiche
===============

- Rilevamento automatico dei dispositivi connessi
- Memoria cache per velocizzare la navigazione tra le directory
- Ripristino della posizione del cursore nelle directory visitate in precedenza
- Informazioni complete sul disco (nome, ID e numero di file)
- Visualizzazione della dimensione dei files (non per VIC-20)
- Ricerca rapida dei file (primo carattere)
- Ordinamento alfabetico ottimizzato
- Supporto per il joystick su entrambe le porte (ove disponibile)
- Scorrimento rapido della lista
- Pulsanti attivi sullo schermo
- Riconoscimento automatico dell'estensione dei file di immagine disco (e nastro)


Installazione
=============

Dopo aver scaricato l'archivio del programma dagli URLs forniti, occorre
estrarre i files contenuti nella cartella "bin" copiandoli sulla cartella
principale del supporto dove si desidera utilizzare il programma.
Nel caso lo si desideri, è possibile copiare solo gli eseguibili relativi
alle macchine che interessano:

Nome file	Macchina compatibile
==========	======================================================
tdb64		C64		turbo installer (opzionale)
db64		 "		programma principale
db20		VIC-20		senza espansione di memoria
db20+3k		 "		con espansione di memoria da 3 KB
db20+8k		 "		con espansione di memoria da 8 KB o più
db128		C128		avviabile sia da 40 che da 80 colonne
db264		264 Series	C16, Plus/4, and other TED machines

Il file "tdb64" è opzionale e (per il momento) è disponibile solo per C64.
Si tratta di un file autoeseguibile (si avvia senza RUN) che provvede ad
installare il "Fast Load" per poi caricare il programma principale "fb64"
con l'opzione "Turbo" attivata (per default), disattivabile dall'utente
tramite l'apposito tasto del menu.

Nota:
Con il "Turbo" installato non è possibile caricare nuovamente Dir Browser
tramite il file "tdb64" (ad esempio al termine di un programma BASIC), ma
occorre caricarlo direttamente tramite il file principale "fb64".
Un altro metodo è quello di premere RUN/STOP+RESTORE per disattivare la
routine "Fast Load", quindi avviare Dir Browser nuovamente da "tdb64".
Ciò è dovuto al fatto che la routine "Fast Load" non è compatibile con i
files autoeseguibili, come quelli presenti (ad esempio) nelle varie versioni
di GEOS (e in alcuni giochi come: GP Circuit, Hot Wheels e Test Drive 2).


Suggerimenti
============

Al fine di ridurre i tasti da premere all'avvio della macchina, è consigliato
copiare la versione del programma adatta alla macchina più utilizzata, come
primo file della cartella principale (l'ordine delle cartelle è ininfluente).
Nel caso si voglia utilizzare la versione "Turbo" per il C64, il primo file
dovrà essere "tdb64".
In questo modo sarà possibile avviare Dir Browser più agevolmente, inviando
da BASIC il comando: LOAD"*",8,1
Inoltre, si consiglia di organizzare i propri programmi in cartelle separate,
possibilmente dividendoli per tipo di macchina.

Nota:
L'interfaccia SD2IEC, pur supportando i nomi di files lunghi (dato che si basa
sul file system FAT32) presenta il limite di mostrare alla macchina Commodore
collegata, i nomi dei files limitati a 16 caratteri (compresa l'eventuale
estensione presente nelle immagini disco), per cui si consiglia di rinominare
i files dei programmi che presentano un nome di lunghezza superiore a quella
standard.
Per migliorare la compatibilità, specie nel caso di programmi "multiload"
(suddivisi in più files con caricamenti multipli), è consigliato togliere
l'estensione ".prg" dal nome, dato che è sottointesa.


Tasti di controllo
==================

Tasti attivi su tutte le macchine:
CRSR/JOY UP		File precedente
CRSR/JOY DOWN		File successivo
CRSR/JOY LEFT		Pagina precedente (o prima riga della pagina)
CRSR/JOY RIGHT		Pagina successiva (o ultima riga della pagina)
HOME			Primo file della lista
CLR (SHIFT+HOME)	Ultimo file della lista
DEL (backspace)		Directory precedente (o smonta un'immagine disco)
INST (SHIFT+DEL)	Radice del disco
"$" (dollar sign)	Ricarica la directory corrente
RUN/STOP		Interrompe il caricamento dal disco (o l'ordinamento
			dei files)
RETURN or JOY FIRE	Lancia un programma (LOAD"file name",8,1), apre una
			directory oppure monta un'immagine disco (o nastro)
SHIFT+RETURN		Forza il caricamento di un programma nell'area BASIC
			(LOAD"file name",8)

VIC-20 e C64:
"<-" (left arrow)	Ritorna al BASIC

C128 e 264 Series:
ESC			Ritorna al BASIC
HELP			Mostra le informazioni sul programma


Tasti funzione
==============

Tranne che nella versione per VIC-20 senza espansione di memoria,
i tasti funzione attivi sono visibili nella parte inferiore dello schermo.

VIC-20, C64 e C128:
F1	DEV(nn)		Cambia l'indirizzo del dispositivo di lettura (8..15)
F2	CACHE		Memoria cache per le directory precedenti (on/off)
F3(*)	RENEW(***)	Ricarica la directory corrente
F4(*)	JOY#(n)		Cambia la porta del joystick (1/2)
F5	SORT		Dispone i files in ordine alfabetico (on/off)
F6(**)	QUIT		Ritorna al BASIC
F7	ABOUT		Mostra le informazioni sul programma
F8(**)	RESET		Esegue il reset della macchina

(*) azioni non disponibili nella versione per VIC-20

(**) al fine di ridurre la dimensione del programma, questi sono gli unici
tasti funzione attivi nella versione per VIC-20 senza espansione di memoria.

(***) versione C64 con il modulo "fastload" abilitato:
F5	TURBO		Fast Load (on/off)

264 Series:
F1	DEV(nn)		Cambia l'indirizzo del dispositivo di lettura (8..15)
F2	RENEW		Ricarica la directory corrente
F3	SORT		Dispone i files in ordine alfabetico (on/off)
F4	CACHE		Memoria cache per le directory precedenti (on/off)
F5	JOY#(n)		Cambia la porta del joystick (1/2)
F6	QUIT		Ritorna al BASIC
F7	RESET		Esegue il reset della macchina


Fast Load (solo C64)
====================

La versione C64 di Dir Browser può essere usata insieme al programma
"Fast Load" di Thomas Tempelmann.
Questo software permette di caricare più rapidamente sia Dir Browser
che i programmi lanciati dallo stesso.
All'avvio di Dir Browser, se viene rilevato "Fast Load" installato in
memoria, il tasto "Turbo" risulterà attivo, diversamente apparirà di un
colore più scuro.
Prima di lanciare un programma, per garantire una maggiore compatibilità,
è possibile disattivare "Fast Load" con l'apposito tasto.

"Fast Load" può essere utilizzato in due modi:
1) caricando ed eseguendo la versione originale di "Fast Load", il quale
   verrà installato in memoria, prima di caricare ed eseguire manualmente
   Dir Browser;

2) lanciando il programma autoeseguibile "tdb64", che deve si trova nella
   stessa cartella di Dir Browser, con il comando:
   	LOAD"TDB64",8,1
   Quest'ultimo si occuperà automaticamente di installare "Fast Load" e di
   lanciare Dir Browser.

Nota:
la routine Fast Load inclusa nel file "tdb64" è una versione modificata (da me
stesso) del programma originale di Thomas Tempelmann, che permette di caricare
i programmi anche da dispositivi con indirizzo diverso da 8, a patto che
eventuali altre unità siano spente o scollegate.
Inoltre, durante il caricamento sarà visibile un effetto "raster bar", invece
del classico blank screen.


Moduli opzionali
================

Dir Browser può essere ricompilato abilitando o meno i seguenti moduli:
aboutenable	Include le informazioni sul programma
addressmode	Forza il caricamento di un programma nell'area BASIC
		(premendo SHIFT+RETURN)
autodetect	Rileva automaticamente i dispositivi connessi
cachemem	Mantiene in memoria le directory precedenti, velocizzando
		l'esplorazione
colorenable	Abilita l'interfaccia a colori
colorline	Usa un colore diverso per il file selezionato ("colorenable"
		richiesto, "rasterbar" disabilitato)
counterenable	Mostra il numero di files presenti nella directory corrente
		("getdiskinfo" richiesto)
devchange	Permette di cambiare il dispositivo in modo ciclico (con indirizzo
		da 8 a 15)
fastsort	Utilizza una versione ottimizzata dell'algoritmo di ordinamento
		("sortenable" richiesto)
getdiskid	Mostra l'ID del disco ("getdiskinfo" richiesto)
getdiskinfo	Mostra le informazioni sul disco o sulla directory corrente (nome,
		ID e numero di files)
joyenable	Abilita l'utilizzo del joystick per l'esplorazione (tramite le
		porte disponibili)
printbars	Stampa le barre di separazione sopra e sotto la lista
printbuttons	Mostra i pulsanti dell'interfaccia utente
rasterbar	Evidenzia l'elemento selezionato con una "raster bar" (permette
		di utilizzare più colori)
rememberpos	Ricorda la posizione del cursore nelle cartelle precedenti già
		visitate
rightalign	Allinea a destra i valori numerici
rootentry	Mostra la voce "root dir" nella lista
rootonstart	Comincia dalla radice del disco all'avvio del programma e ogni
		volta che si cambia dispositivo
searchenable	Cerca un file che inizia con il carattere premuto
sortenable	Abilita l'ordinamento dei files tramite l'algoritmo "bubble sort"
statusenable	Mostra un messaggio di attesa durante il caricamento
		(o durante l'ordinamento dei files)
tapesupport	Permette di montare le immagini TAP (modulo ITS richiesto)

Nota:
le opzioni di compilazione sono specificate (con valori 0 o 1) all'interno dei
files di configurazione relativi alla singola macchina, identificati
dall'estensione "def".


Opzioni specifiche
==================

VIC-20 (solo versione +8k):
cartsupport	Permette di riconoscere ed avviare le immagini delle cartucce
		(anche suddivise in più parti)

C64:
fastload	Rileva la presenza di Fast Load e permette di disabilitarlo
kernalold	Risolve alcuni "bug" sulla gestione del colore con le vecchie
		versioni del Kernal (rev. 1 or 2)

C64, C128 e 264 Series:
getsize		Mostra la dimensione dei files
wholeline	Mette in evidenza l'intera riga dello schermo in corrispondenza
		della voce selezionata

C128 e 264 Series:
romscroll	Utilizza le routine integrate nella ROM del Kernal per far
		scorrere la lista sullo schermo

264 Series:
fnkeysave	Salva la definizione dei tasti funzione prima dell'avvio del
		programma (consigliato su Plus/4)


Emulazione su VICE
==================

I files nella cartella "vice" sono versioni compilate per il debug, e non
vanno usate nella macchina reale.
In particolare, il comando "root" è compatibile con il "VICE Virtual FS" e
il colore della cornice cambia durante l'accesso al disco, per dare un
feedback all'utente.
Naturalmente, all'interno di VICE non è possibile montare le immagini disco
(e nastro) direttamente dal programma.


Ringraziamenti
==============

- nbla000
che con il suo CBM FileBrowser v1.6 (c) 2010-2013, ha permesso di semplificare
l'utilizzo dell'interfaccia SD2IEC con le macchine Commodore.
L'esigenza di dotare il programma di nuove funzionalità, mi ha spinto a
studiarne il codice sorgente, per crearne uno completamente nuovo, cercando di
mantenere il feeling e le dimensioni ridotte tipiche del programma originale.

- Thomas Tempelmann
autore di Fast Load v1.1 (c) 1984, un programma per C64 che permette di
velocizzare il caricamento dei programmi dal disk drive 1541, senza nessuna
modifica hardware.
Attualmente è uno dei pochi "fast loader" riconosciuti dall'interfaccia SD2IEC,
e può essere usato insieme a Dir Browser, con la possibilità di disabilitarlo
nei casi in cui ci siano problemi di compatibilità con un software specifico. 

- Marco Baye
che grazie al suo compilatore ACME 0.97, the ACME Crossassembler for Multiple
Environments (c) 1998-2020, mi ha permesso di rendere più veloce e razionale
lo sviluppo di questo progetto lavorando comodamente su un PC.


Collaboratori
=============

- You Dev IT (Mille e Una Avventura)
  www.youdev.it

- IGP Tech Blog
  www.isaac-garcia-peveri.com

- RetroFixer
  https://retrofixer.it


Copyright
=========

Il programma viene rilasciato per un pubblico utilizzo secondo gli usi legali.
Può essere scaricato dagli URLs indicati e non può essere ridistribuito
in altri siti, nè installato su supporti di memoria per scopi commerciali, se
non dietro espresso consenso dell'autore.
L'archivio scaricabile contiene gli eseguibili, il codice sorgente, composto da
più files, e il presente file di descrizione, disponibile in lingua italiana e
inglese.
Ogni chiarimento, modifica o proposta di modifica al codice sorgente può essere
comunicato al creatore del progetto tramite i canali di comunicazione forniti.

autore:		Ing. Francesco Gramignani "Graham"
email:		fra.gram@tin.it
URLs:		https://graham-it.itch.io/dirbrowser
		https://github.com/graham-it/DirBrowser

Palermo, 14 Agosto 2025
